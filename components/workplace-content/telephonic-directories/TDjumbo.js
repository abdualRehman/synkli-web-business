import { driver } from "driver.js";
import "driver.js/dist/driver.css";
import { useEffect, useState } from "react";
import { useDispatch, useSelector } from "react-redux";
import { handleIndicators } from "store/global/globalReducer";
const TDjumbo = ({ toggleAddDirectory, showAddDirectory }) => {
  const dispatch = useDispatch();
  const { data: loginData } = useSelector((state) => state.login);
  const { showindicators } = useSelector((state) => state.global);
  //&& !loginData?.second_time_login
  useEffect(() => {
    console.log(showAddDirectory, showindicators, "indicator");
    const driverObj = driver({
      showProgress: true,
      onHighlighted: () => {
        console.log("highlighted");
      },
      steps: [
        {
          element: ".add-directory-indicate",

          popover: {
            title: "Client",
            description:
              "By clicking this button you can add a telephonic directory.Please note that atleast one branch is required.",
            popoverClass: "my-custom-popover-class ",
          },
        },
      ],
    });
    if (!showAddDirectory && showindicators && !loginData?.second_time_login) {
      driverObj.drive();
    } else {
      driverObj.destroy();
    }

    return () => {
      dispatch(handleIndicators(false));
      driverObj.destroy();
    };
  }, [showAddDirectory, showindicators]); // Empty dependency array to run the effect only once

  return (
    <div>
      <div className="ann-jumbo  md:mx-10 mx-5 py-5 relative  ">
        <div className="profile-jumbo-flex">
          <div className="jumbo-flex-1 ">
            <div className="jumbo-name">Telephonic Directory</div>
            <div className="jumbo-dir mt-2">
              Workspace{" "}
              <span className="special-jumbo-text">
                &gt; Telephonic Directory
              </span>
            </div>
          </div>
        </div>
        <div className=" md:mt-0   absolute right-0 top-10">
          <button
            onClick={toggleAddDirectory}
            className="flex gap-2 px-5 py-2 add-directory-indicate items-center add-app-btn"
          >
            {" "}
            <span>
              <svg
                width="15"
                height="18"
                viewBox="0 0 19 23"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M0.615649 7.44922L0.616168 7.44959C0.679011 7.49545 0.770391 7.51713 0.881592 7.4843L0.88934 7.48201L0.897158 7.47998L4.6843 6.49376L4.69295 6.4915L4.70168 6.48956L4.70289 6.48929C4.76882 6.46386 4.82878 6.42416 4.87846 6.37265L4.88469 6.36618L4.88475 6.36624C4.99728 6.25367 5.05318 6.1106 5.05289 5.98496L5.05289 5.98395L5.05259 4.5678L5.05259 4.56003L5.05283 4.55226C5.05661 4.42983 5.10139 4.3095 5.11942 4.26268C5.13297 4.2275 5.14891 4.19041 5.16632 4.15542C5.17727 4.13344 5.2096 4.06854 5.26169 4.00871L5.29221 3.97365L5.32866 3.94483C5.31973 3.95189 5.35167 3.92521 5.39727 3.89316C5.44203 3.86171 5.50309 3.82232 5.58282 3.77793C5.74234 3.68911 5.97534 3.58099 6.30042 3.4764C6.95014 3.26734 7.96639 3.07272 9.50005 3.07271L0.615649 7.44922ZM0.615649 7.44922C0.550721 7.40196 0.500395 7.31823 0.5 7.19644L0.500001 3.90679L0.5 3.90631M0.615649 7.44922L0.5 3.90631M14.1389 6.76538L17.9567 7.94237C18.2514 8.04517 18.5611 7.97986 18.769 7.77004C18.9159 7.62311 18.9958 7.42054 18.9958 7.19772L19 3.9086L9.50047 0.5C16.2074 0.500307 18.2756 3.23589 18.2743 3.23415L18.2746 3.23464C18.399 3.3988 18.5008 3.70246 18.5 3.90669L18.5 3.90796L18.4958 7.19708V7.19772C18.4958 7.29953 18.4607 7.37125 18.4154 7.41653L18.4138 7.41814C18.3517 7.48084 18.2481 7.51446 18.1214 7.47027L18.1127 7.46726L18.104 7.46456L14.3022 6.29249M14.1389 6.76538L14.3128 6.29658C14.3092 6.29526 14.3057 6.2939 14.3022 6.29249M14.1389 6.76538C13.7427 6.61844 13.4543 6.20182 13.4537 5.77583L14.1389 6.76538ZM14.3022 6.29249C14.1091 6.21499 13.9543 5.99113 13.9537 5.77565M14.3022 6.29249L13.9537 5.77565M13.9537 5.77565C13.9537 5.77547 13.9537 5.7753 13.9537 5.77513L13.954 4.56843H13.9542L13.9538 4.55557C13.9506 4.42909 13.9046 4.30744 13.8824 4.25289C13.8607 4.1995 13.8079 4.0776 13.719 3.98346L13.7012 3.96458L13.6815 3.94764L13.3555 4.32673C13.6815 3.94764 13.6812 3.94737 13.6809 3.9471L13.6802 3.94654L13.6788 3.94538L13.6759 3.94285L13.6688 3.93706C13.6637 3.93287 13.6576 3.92803 13.6506 3.92259C13.6365 3.91172 13.6186 3.89846 13.5965 3.88319C13.5524 3.85264 13.4918 3.81412 13.4125 3.77058C13.2539 3.68345 13.0212 3.57666 12.6964 3.47311C12.047 3.26612 11.0307 3.07241 9.50015 3.07271L13.9537 5.77565ZM0.5 3.90631C0.499805 3.70279 0.601364 3.39985 0.724618 3.23621C0.72888 3.23073 0.784242 3.16023 0.898712 3.04502C1.43246 2.50784 3.80359 0.500307 9.50043 0.5L0.5 3.90631Z"
                  stroke="white"
                />
                <path
                  d="M1.99937 14.2926V15.0326C1.99937 15.3724 2.27726 15.6495 2.6198 15.6495H4.61946C4.78378 15.6492 4.94129 15.5841 5.0574 15.4685C5.17351 15.3528 5.23873 15.196 5.23873 15.0326V14.2926C5.2388 14.129 5.17364 13.9721 5.05754 13.8563C4.94144 13.7405 4.78389 13.6752 4.61946 13.6748H2.6198C2.27755 13.6748 1.99937 13.9527 1.99937 14.2926ZM9.17925 15.0326V14.2926C9.17925 13.9527 8.90136 13.6748 8.55941 13.6748H6.55916C6.21691 13.6748 5.9399 13.9527 5.9399 14.2926V15.0326C5.9399 15.196 6.00511 15.3528 6.12122 15.4685C6.23733 15.5841 6.39484 15.6492 6.55916 15.6495H8.55941C8.90165 15.6495 9.17925 15.3724 9.17925 15.0326ZM13.1198 15.0326V14.2926C13.1198 13.9527 12.8419 13.6748 12.4993 13.6748H10.4997C10.3351 13.6751 10.1774 13.7403 10.0611 13.8561C9.94481 13.972 9.87941 14.1289 9.87925 14.2926V15.0326C9.87925 15.3724 10.1569 15.6495 10.4997 15.6495H12.4993C12.6638 15.6493 12.8215 15.5843 12.9378 15.4686C13.0541 15.353 13.1195 15.1962 13.1198 15.0326ZM17.0603 15.0326V14.2926C17.0603 13.9527 16.7824 13.6748 16.4396 13.6748H14.4399C14.2753 13.6751 14.1176 13.7403 14.0012 13.8561C13.8849 13.9719 13.8194 14.1289 13.8192 14.2926V15.0326C13.8192 15.3724 14.0971 15.6495 14.4399 15.6495H16.4396C16.6041 15.6494 16.7618 15.5844 16.8782 15.4687C16.9946 15.3531 17.0601 15.1962 17.0603 15.0326ZM0.619263 11.9743H2.6201C2.78439 11.9739 2.94181 11.9087 3.05788 11.793C3.17395 11.6773 3.2392 11.5206 3.23936 11.3571V10.6172C3.23936 10.2779 2.96147 10 2.6201 10H0.619263C0.454988 10.0005 0.297613 10.0658 0.181562 10.1814C0.0655116 10.2971 0.000231136 10.4538 0 10.6172V11.3571C7.69817e-05 11.5206 0.0653081 11.6774 0.181392 11.7931C0.297476 11.9088 0.454941 11.9739 0.619263 11.9743ZM6.55916 11.9743C6.72366 11.9742 6.88138 11.9091 6.9977 11.7934C7.11402 11.6777 7.17944 11.5208 7.17959 11.3571V10.6172C7.17959 10.2779 6.9017 10 6.55916 10H4.5595C4.39515 10.0003 4.23764 10.0655 4.12154 10.1812C4.00544 10.2969 3.94023 10.4537 3.94023 10.6172V11.3571C3.94016 11.5207 4.00534 11.6775 4.12146 11.7932C4.23757 11.909 4.39513 11.9741 4.5595 11.9743H6.55916ZM10.4997 11.9743C10.6642 11.9742 10.822 11.9091 10.9383 11.7934C11.0547 11.6777 11.1202 11.5208 11.1204 11.3571V10.6172C11.1204 10.2779 10.8425 10 10.4997 10H8.50002C8.33552 10.0002 8.17781 10.0653 8.06146 10.181C7.94511 10.2967 7.87961 10.4535 7.8793 10.6172V11.3571C7.8793 11.697 8.15719 11.9743 8.50002 11.9743H10.4997ZM14.4402 10H12.4408C12.2763 10.0002 12.1186 10.0653 12.0023 10.181C11.8859 10.2967 11.8204 10.4535 11.8201 10.6172V11.3571C11.8201 11.697 12.098 11.9743 12.4408 11.9743H14.4402C14.6046 11.9741 14.7621 11.909 14.8783 11.7932C14.9944 11.6775 15.0596 11.5207 15.0595 11.3571V10.6172C15.0595 10.4537 14.9943 10.2969 14.8782 10.1812C14.7621 10.0655 14.6046 10.0003 14.4402 10ZM18.3807 10H16.3799C16.2156 10.0005 16.0583 10.0658 15.9422 10.1814C15.8262 10.2971 15.7609 10.4538 15.7606 10.6172V11.3571C15.7606 11.697 16.0385 11.9743 16.3799 11.9743H18.3807C18.545 11.9739 18.7025 11.9087 18.8185 11.793C18.9346 11.6773 18.9998 11.5206 19 11.3571V10.6172C18.9997 10.4538 18.9344 10.2972 18.8184 10.1815C18.7023 10.0659 18.545 10.0006 18.3807 10ZM3.23936 18.7074V17.9677C3.23936 17.6281 2.96147 17.3508 2.6201 17.3508H0.619263C0.454992 17.3512 0.297571 17.4164 0.181496 17.532C0.0654197 17.6476 0.000154372 17.8043 0 17.9677V18.7074C0 19.0479 0.278186 19.3252 0.619263 19.3252H2.6201C2.7845 19.3247 2.942 19.2594 3.05809 19.1436C3.17417 19.0278 3.23936 18.8709 3.23936 18.7074ZM4.5595 19.3252H6.55916C6.72374 19.3249 6.8815 19.2598 6.99782 19.1439C7.11414 19.0281 7.17952 18.8711 7.17959 18.7074V17.9677C7.17959 17.6281 6.9017 17.3508 6.55916 17.3508H4.5595C4.39518 17.3511 4.23767 17.4162 4.12156 17.5318C4.00545 17.6475 3.94023 17.8043 3.94023 17.9677V18.7074C3.94012 18.7884 3.95605 18.8687 3.9871 18.9435C4.01816 19.0184 4.06374 19.0865 4.12125 19.1439C4.17875 19.2012 4.24705 19.2468 4.32225 19.2779C4.39744 19.309 4.47806 19.325 4.5595 19.3252ZM8.50032 19.3252H10.5C10.6646 19.3249 10.8224 19.2598 10.9387 19.144C11.0551 19.0281 11.1205 18.8711 11.1207 18.7074V17.9677C11.1207 17.6281 10.8428 17.3508 10.5 17.3508H8.50032C8.33581 17.3509 8.17806 17.4159 8.06169 17.5316C7.94531 17.6472 7.87982 17.8041 7.87959 17.9677V18.7074C7.87959 19.0479 8.15748 19.3252 8.50032 19.3252ZM12.4406 19.3252H14.4399C14.5214 19.325 14.602 19.309 14.6772 19.2779C14.7524 19.2468 14.8207 19.2012 14.8782 19.1439C14.9357 19.0865 14.9813 19.0184 15.0123 18.9435C15.0434 18.8687 15.0593 18.7884 15.0592 18.7074V17.9677C15.0592 17.8043 14.994 17.6475 14.8779 17.5318C14.7617 17.4162 14.6042 17.3511 14.4399 17.3508H12.4406C12.276 17.3509 12.1183 17.4159 12.0019 17.5316C11.8855 17.6472 11.8201 17.8041 11.8198 17.9677V18.7074C11.82 18.8711 11.8854 19.0281 12.0018 19.144C12.1182 19.2598 12.2759 19.3249 12.4406 19.3252ZM18.3807 17.3508H16.3799C16.2156 17.3512 16.0582 17.4164 15.9421 17.532C15.8261 17.6476 15.7608 17.8043 15.7606 17.9677V18.7074C15.7606 19.0479 16.0385 19.3252 16.3799 19.3252H18.3807C18.5451 19.3247 18.7026 19.2594 18.8187 19.1436C18.9348 19.0278 19 18.8709 19 18.7074V17.9677C19 17.6281 18.7218 17.3508 18.3807 17.3508ZM16.0602 21.0257H2.76343C2.59915 21.0262 2.44178 21.0914 2.32573 21.2071C2.20968 21.3228 2.1444 21.4794 2.14417 21.6429V22.3828C2.14409 22.5463 2.20927 22.7032 2.32539 22.8189C2.4415 22.9346 2.59906 22.9998 2.76343 23H16.0602C16.2246 22.9998 16.3822 22.9347 16.4984 22.819C16.6146 22.7033 16.6798 22.5464 16.6797 22.3828V21.6429C16.6797 21.3036 16.4018 21.0257 16.0602 21.0257Z"
                  fill="white"
                />
              </svg>
            </span>{" "}
            <span className="flex">Add Telephonic Directory</span>{" "}
          </button>
        </div>
      </div>
    </div>
  );
};
export default TDjumbo;
